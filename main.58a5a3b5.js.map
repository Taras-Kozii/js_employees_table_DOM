{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","tbodyRows","tBodies","rows","form","notification","order","sortRows","a","b","index","typeOrder","aText","children","textContent","bText","localeCompare","formatToNum","num","Number","slice","split","join","formatToSting","str","replace","addEmployee","data","FormData","insertAdjacentHTML","get","editCell","cell","cellText","innerText","editFild","addEditField","addEventListener","ev","code","handleEventsEditFild","getCorrectAge","prevAge","currentAge","showNotification","getCorrectSalary","prevSalary","currentSalary","getCorrectName","prevName","currentName","length","getFinallyValue","prevText","currentText","cellIndex","editField","createElement","className","parseFloat","type","min","max","startsWith","append","focus","editFildValue","value","title","classType","classList","add","hidden","innerHTML","setInterval","remove","e","preventDefault","checkValidity","reset","target","tagName","thIndex","sort","tr","rowIndex","parentElement","sectionRowIndex","cells","row"],"mappings":"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","file":"main.58a5a3b5.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nlet tbodyRows = [...table.tBodies[0].rows];\n\nconst form = document.querySelector('.new-employee-form');\nconst notification = document.querySelector('.notification');\nlet order = 'asc';\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  if (form.checkValidity()) {\n    e.preventDefault();\n    addEmployee();\n    showNotification('Success', 'New employee was added', 'success');\n    form.reset();\n  }\n});\n\ntable.addEventListener('click', function(e) {\n  if (e.target.tagName === 'TH') {\n    const thIndex = e.target.cellIndex;\n\n    if (order === 'asc') {\n      order = 'desc';\n    } else {\n      order = 'asc';\n    }\n\n    tbodyRows.sort((a, b) => sortRows(a, b, thIndex, order));\n\n    for (const tr of tbodyRows) {\n      table.tBodies[0].append(tr);\n    }\n  }\n});\n\ntable.addEventListener('dblclick', function(e) {\n  if (e.target.tagName !== 'TD') {\n    return;\n  }\n\n  const cellIndex = e.target.cellIndex;\n  const rowIndex = e.target.parentElement.sectionRowIndex;\n\n  editCell(tbodyRows[rowIndex].cells[cellIndex]);\n});\n\ntable.tBodies[0].addEventListener('click', e => {\n  if (e.target.tagName === 'TD') {\n    const rowIndex = e.target.parentElement.sectionRowIndex;\n\n    for (const row of tbodyRows) {\n      if (row.sectionRowIndex !== rowIndex) {\n        row.className = '';\n      } else {\n        row.className = 'active';\n      }\n    }\n  }\n});\n\nfunction sortRows(a, b, index, typeOrder) {\n  const aText = a.children[index].textContent;\n  const bText = b.children[index].textContent;\n\n  if (aText[0] !== '$') {\n    return typeOrder === 'asc'\n      ? aText.localeCompare(bText) : bText.localeCompare(aText);\n  }\n\n  return typeOrder === 'asc'\n    ? formatToNum(aText) - formatToNum(bText)\n    : formatToNum(bText) - formatToNum(aText);\n}\n\nfunction formatToNum(num) {\n  return Number(num.slice(1).split(',').join(''));\n}\n\nfunction formatToSting(str) {\n  return '$' + str.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\n// function onSuccessSubmit() {\n//   notification.hidden = false;\n\n//   setInterval(() => {\n//     notification.hidden = true;\n//   }, 1500);\n// }\n\nfunction addEmployee() {\n  const data = new FormData(form);\n\n  table.children[1].insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${data.get('name')}</td>\n      <td>${data.get('position')}</td>\n      <td>${data.get('office')}</td>\n      <td>${data.get('age')}</td>\n      <td>${formatToSting(data.get('salary'))}</td>\n    </tr>\n  `);\n  tbodyRows = [...table.tBodies[0].rows];\n}\n\nfunction editCell(cell) {\n  const cellText = cell.innerText;\n\n  cell.innerText = '';\n\n  const editFild = addEditField(cellText, cell);\n\n  editFild.addEventListener('keyup', (ev) => {\n    if (ev.code === 'Enter') {\n      handleEventsEditFild(editFild, cell, cellText);\n    }\n  });\n\n  editFild.addEventListener('blur', (ev) => {\n    handleEventsEditFild(editFild, cell, cellText);\n  });\n}\n\nfunction getCorrectAge(prevAge, currentAge) {\n  if (currentAge >= 18 && currentAge <= 90) {\n    return currentAge;\n  } else {\n    showNotification('Error', 'Age must be between 18 and 90', 'error');\n\n    return prevAge;\n  }\n}\n\nfunction getCorrectSalary(prevSalary, currentSalary) {\n  if (currentSalary >= 1) {\n    return formatToSting(currentSalary);\n  } else {\n    showNotification('Error', 'Salary must be greater than zero', 'error');\n\n    return prevSalary;\n  }\n}\n\nfunction getCorrectName(prevName, currentName) {\n  if (currentName.length >= 4) {\n    return currentName;\n  } else {\n    showNotification(\n      'Error',\n      'The name must be longer than 4 characters',\n      'error'\n    );\n\n    return prevName;\n  }\n}\n\nfunction getFinallyValue(cell, prevText, currentText) {\n  switch (cell.cellIndex) {\n    case 0:\n      cell.textContent = getCorrectName(currentText, prevText);\n      break;\n\n    case 3:\n      cell.textContent = getCorrectAge(currentText, prevText);\n      break;\n\n    case 4:\n      cell.textContent = getCorrectSalary(currentText, prevText);\n      break;\n\n    default:\n      cell.textContent = prevText;\n  }\n}\n\nfunction addEditField(cellText, cell) {\n  const editField = document.createElement('input');\n\n  editField.className = 'cell-input';\n\n  if (Number.parseFloat(cellText)) {\n    editField.type = 'number';\n    editField.min = 18;\n    editField.max = 90;\n  }\n\n  if (cellText.startsWith('$')) {\n    editField.type = 'number';\n    editField.min = 1;\n  }\n\n  cell.append(editField);\n  editField.focus();\n\n  return editField;\n}\n\nfunction handleEventsEditFild(editFildValue, cell, cellText) {\n  if (editFildValue.value.length > 0) {\n    getFinallyValue(cell, editFildValue.value, cellText);\n  }\n\n  if (editFildValue.value.length === 0) {\n    cell.textContent = cellText;\n  }\n}\n\nfunction showNotification(title, textContent, classType) {\n  notification.classList.add(classType);\n  notification.hidden = false;\n  notification.querySelector('h2').innerHTML = title;\n  notification.querySelector('p').innerHTML = textContent;\n\n  setInterval(() => {\n    notification.hidden = true;\n    notification.classList.remove(classType);\n  }, 2200);\n}\n"]}